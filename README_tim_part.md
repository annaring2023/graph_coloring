## Принципи дискретної математики

**Викоростані основні концепції:**
- Вершини та ребра (`nodes`, `edges`)

- Степінь вершини (`degree`)

- Суміжні вершин (`neighbors`)

- Означення Розфарбуванням простого графа
    - Розфарбуванням простого графа G називають таке приписування кольорів (або натуральних чисел) його вершинам, що ніякі дві суміжні вершини не набувають однакового кольору.

- Ми шукаємо k-кольорове розфарбування, а саме k = 3

- Функція `is_proper_coloring()` перевіряє правильність розфарбування через визначення розфарбування графа:
жодні дві суміжні вершини не повинні мати однаковий колір.

- Множинні способи задання графа
    - Граф у JSON файлі задається як список суміжності (Adjacency List), де кожна вершина має `edge_with` — список суміжних вершин, та додатковий атрибут `color`

    - Крім списку суміжності у JSON, у проєкті також використовується список ребер (Edge List), де ребра зберігаються як множина пар вершин: (u, v). Зручно для аналізу структури графа, додавання нових ребер та застосування алгоритмів.

- Алгоритм backtracking - рекурсивний метод перебору всіх можливих комбінацій

- Багато змінних, які використовуються в програмуванні, також використовуються в дискретній математиці:
    - Множина (`set`) — це скінченна колекція унікальних елементів, порядок яких не важливий.

    - Кортеж (`tuple`) — впорядкована послідовність елементів, де порядок важливий, і елементи можуть повторюватися.

    - Послідовність (`list`) — впорядкована колекція елементів (аналог кортежу, але змінювана).

    - Відношення (Relation) — множина пар елементів з двох множин (у графах — ребра).

    - Функція або відображення (`def`) — відображення елементів однієї множини у елементи іншої (у коді це наші функції).



## `def read_undirected_graph(filepath: str) -> nx.Graph`

**Призначення функції**

Функція призначена для завантаження неорієнтованого, розфарбованого графа з JSON-файлу та побудови об’єкта `networkx.Graph`

**Чого ми обрали json?**

просто завантажується в Python без додаткових бібліотек
є одним із найпоширеніших форматів даних

**Формат вхідних даних**

```json
{
  "1": { "color": "r", "edge_with": [2, 3, 4] },
  "2": { "color": "r", "edge_with": [1, 3, 4] },
  "3": { "color": "g", "edge_with": [1, 2, 4] },
  "4": { "color": "b", "edge_with": [1, 2, 3] }
}
```
**Алгоритм роботи**

- Зчитування JSON-файлу
- Додавання вершин
- Додавання ребер
- Повернення готового графа



## `def is_proper_coloring(graph: nx.Graph) -> bool`

**Призначення функції**

Функція перевіряє, чи є розфарбування графа правильним — тобто чи не мають сусідні вершини однаковий колір.

**Чому така перевірка потрібна?**

Щоб визначити, чи правильно працює наш алгоритм розфарбування, та для аналізу вхідного графа

**Вхідні дані**

Функція отримує граф `networkx.Graph`, у якому кожна вершина має атрибут: color

**Алгоритм роботи**

- Перебір усіх ребер у графі
- Порівняння кольорів двох суміжних вершин
- Якщо знайдено однакові кольори — повернення `False`
- Якщо конфліктів немає — повернення `True`



## `def draw_colored_graph(graph: nx.Graph) -> None`

**Призначення функції**

Функція візуалізує неорієнтований граф, використовуючи кольори вершин. Якщо колір не задано, вершина фарбується в сірий (gray).

**Чому така візуалізація потрібна?**

Для демонстрації графів у наочному та зрозумілому вигляді.

**Вхідні дані**

Граф `networkx.Graph`, де кожна вершина може мати атрибут

**Алгоритм роботи**

Обчислити розташування вершин за допомогою `spring_layout`

Створити список кольорів вершин, використовуючи атрибут color або gray за замовчуванням

Відсортувати вершини для упорядкованого відображення

Намалювати граф за допомогою `nx.draw` із підписами, кольорами та стилем

Вимкнути осі та показати графік через `plt.show()`



## `def coloring_algorythm(graph: nx.Graph) -> tuple[bool, nx.Graph, list]`

**Призначення функції**

Функція реалізує алгоритм розфарбування графа трьома кольорами ('r', 'g', 'b') з використанням backtracking.

**Вхідні дані**

Граф networkx.Graph

**Функція повертає кортеж**

(True, colored_graph, frames) - якщо розфарбування успішне
(False, None, frames) - якщо розфарбування неможливе

colored_graph — граф із призначеними кольорами.

frames — список словників з станом кольорів вершин на кожному кроці алгоритму.

**Алгоритм роботи**

- Створення копії графа для роботи, збереження початкових кольорів.

- Встановлення кольору всіх вершин у None.

- Формування списку вершин у порядку зменшення степеня.

- Визначення функції `is_safe(node, color)` для перевірки можливості призначити колір без конфліктів.
    - повертає False, якщо колір співпадає з початковим

    - повертає False, якщо будь-який сусід уже має цей колір

    - повертає True, інакше

- Визначення функції `snapshot()` для збереження поточного стану кольорів графа у frames.
    - створює словник поточного стану кольорів усіх вершин;

    - для вершин без призначеного кольору використовує їх початковий колір;

    - додає цей словник у список `frames` для подальшої візуалізації, який визначений у межах основної функції `coloring_algorythm()`.

- Рекурсивний backtracking `backtrack(index)`:

    - для поточної вершини пробує всі три кольори, перевіряє їх допустимість з `is_safe()`

    - якщо колір підходить — призначає його і переходить до наступної вершини у порядку зменшення степеня

    - якщо далі не виходить — повертається назад і пробує інший колір.

    - кожен раз коли призначається новий колір, або приберається, `snapshot()` зберігає цей крок розфарбування

- Повернення результату: успіх або невдача разом із фреймами.



## `def animate_coloring(graph: nx.Graph, frames: list) -> `

**Призначення функції**

Функція створює анімовану візуалізацію покрокового розфарбування графа. Кожен кадр (`frame`) відображає стан графа на певному кроці алгоритму.

**Чому потрібна анімація**

Для наочного спостереження роботи алгоритму розфарбування та для аналізу ефективності алгоритму та перевірки правильності присвоєння кольорів.

**Вхідні дані**

`graph` - граф networkx.Graph, що розфарбовується;

`frames` - Список словників, де кожен словник відображає стан кольорів вершин у форматі:

**Вихідні дані**

Функція повертає об’єкт `FuncAnimation` з бібліотеки `matplotlib.animation`, який можна зберігати або відтворювати.

**Алгоритм роботи**

- Обчислює розташування вершин за допомогою `spring_layout`.

- Створює фігуру та вісь для малювання графа.

- Визначає внутрішню функцію `update(i)`, яка:
    - очищає вісь

    - отримує стан графа з `frames[i]`

    - формує список кольорів для вершин

    - малює граф із підписами, кольорами та стилем

- Створює анімацію через `FuncAnimation` з інтервалом 500 мс між кадрами

- Відображає граф за допомогою `plt.show()`

- Повертає об’єкт анімації



## Інтерфейс з `argparse`

**Призначення**

Ця частина коду реалізує інтерфейс командного рядка для програми, яка працює з графами і їх розфарбуванням.

**Вона дозволяє користувачеві**

- вибрати файл з графом у форматі JSON

- обрати режим роботи програми

- увімкнути детальний режим виводу

- при необхідності зберегти результат розфарбування у файл

**Вхідні параметри**

- `filepath` (обов’язковий)

    Шлях до JSON-файлу з даними графа.

- `--mode` або `-m` (необов’язковий)

    Режим роботи програми. Допустимі значення:

    - `check` — перевірити правильність розфарбування графа;

    - `draw` — відобразити граф;

    - `color` — розфарбувати граф алгоритмом backtracking;

    - `info` — показати загальну інформацію про граф (за замовчуванням).

- `--verbose` або `-v` (необов’язковий)

    Включає детальний вивід інформації про вершини та ребра графа.

- `--output` або `-o` (необов’язковий)

    Шлях до файлу для збереження результату розфарбування (використовується лише в режимі `color`).

**Алгоритм роботи**

- Створення об’єкта ArgumentParser із описом програми.

- Додавання аргументів (`filepath`, `mode`, `verbose`, `output`) з поясненням та обмеженнями.

- Виклик `parser.parse_args()` для зчитування параметрів із командного рядка.

- В залежності від обраного режиму (`mode`) виконується відповідна дія:

    - `check` — перевірка правильності розфарбування;

    - `draw` — візуалізація графа;

    - `color` — пошук розфарбування алгоритмом backtracking та його візуалізація;

    - `info` — вивід загальної інформації про граф.

- Включення додаткових дій у разі `--verbos`e або --output.

- Обробка помилок при роботі з файлами та JSON (`FileNotFoundError`, `JSONDecodeError`, `KeyError`).

**Переваги використання argparse**

- Забезпечує зручний та стандартизований інтерфейс командного рядка.

- Підтримує довідку через `--help`.

- Дозволяє контролювати типи даних та допустимі значення для аргументів.
